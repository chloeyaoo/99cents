{"ast":null,"code":"import{BrowserRouter as Router,Routes,Route,Navigate,useLocation}from'react-router-dom';import{useEffect,useState}from'react';import{initGA,logPageView}from'./analytics';// Import the analytics functions\nimport Navbar from'./components/Navbar';import SendAppreciation from'./components/SendAppreciation';import ActivityHistory from'./components/ActivityHistory';import Leaderboard from'./components/Leaderboard';import Analytics from'./components/Analytics';import Login from'./components/Login';import Register from'./components/Register';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function TrackingWrapper(_ref){let{children}=_ref;const location=useLocation();useEffect(()=>{logPageView(location.pathname);// Log the page view on every route change\n},[location]);return children;}function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);useEffect(()=>{initGA();// Initialize Google Analytics when the app starts\nconst token=localStorage.getItem('token');if(token){setIsAuthenticated(true);}},[]);const handleLogin=()=>{setIsAuthenticated(true);};const handleLogout=()=>{setIsAuthenticated(false);localStorage.removeItem('token');localStorage.removeItem('userId');};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(TrackingWrapper,{children:[isAuthenticated&&/*#__PURE__*/_jsx(Navbar,{handleLogout:handleLogout}),/*#__PURE__*/_jsx(Routes,{children:!isAuthenticated?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/history\"})}),/*#__PURE__*/_jsx(Route,{path:\"/send\",element:/*#__PURE__*/_jsx(SendAppreciation,{})}),/*#__PURE__*/_jsx(Route,{path:\"/history\",element:/*#__PURE__*/_jsx(ActivityHistory,{})}),/*#__PURE__*/_jsx(Route,{path:\"/leaderboard\",element:/*#__PURE__*/_jsx(Leaderboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/analytics\",element:/*#__PURE__*/_jsx(Analytics,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/history\",replace:true})})]})})]})});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Routes","Route","Navigate","useLocation","useEffect","useState","initGA","logPageView","Navbar","SendAppreciation","ActivityHistory","Leaderboard","Analytics","Login","Register","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TrackingWrapper","_ref","children","location","pathname","App","isAuthenticated","setIsAuthenticated","token","localStorage","getItem","handleLogin","handleLogout","removeItem","path","element","to","onLogin","replace"],"sources":["/Users/Chan Keet/Documents/web_app_project/99c/frontend/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Routes, Route, Navigate, useLocation } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport { initGA, logPageView } from './analytics'; // Import the analytics functions\nimport Navbar from './components/Navbar';\nimport SendAppreciation from './components/SendAppreciation';\nimport ActivityHistory from './components/ActivityHistory';\nimport Leaderboard from './components/Leaderboard';\nimport Analytics from './components/Analytics';\nimport Login from './components/Login';\nimport Register from './components/Register';\n\nfunction TrackingWrapper({ children }) {\n  const location = useLocation();\n\n  useEffect(() => {\n    logPageView(location.pathname); // Log the page view on every route change\n  }, [location]);\n\n  return children;\n}\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  useEffect(() => {\n    initGA(); // Initialize Google Analytics when the app starts\n    const token = localStorage.getItem('token');\n    if (token) {\n      setIsAuthenticated(true);\n    }\n  }, []);\n\n  const handleLogin = () => {\n    setIsAuthenticated(true);\n  };\n\n  const handleLogout = () => {\n    setIsAuthenticated(false);\n    localStorage.removeItem('token');\n    localStorage.removeItem('userId');\n  };\n\n  return (\n    <Router>\n      <TrackingWrapper>\n        {isAuthenticated && <Navbar handleLogout={handleLogout} />}\n        <Routes>\n          {!isAuthenticated ? (\n            <>\n              <Route path=\"/\" element={<Navigate to=\"/login\" />} />\n              <Route path=\"/login\" element={<Login onLogin={handleLogin} />} />\n              <Route path=\"/register\" element={<Register />} />\n              <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n            </>\n          ) : (\n            <>\n              <Route path=\"/\" element={<Navigate to=\"/history\" />} />\n              <Route path=\"/send\" element={<SendAppreciation />} />\n              <Route path=\"/history\" element={<ActivityHistory />} />\n              <Route path=\"/leaderboard\" element={<Leaderboard />} />\n              <Route path=\"/analytics\" element={<Analytics />} />\n              <Route path=\"*\" element={<Navigate to=\"/history\" replace />} />\n            </>\n          )}\n        </Routes>\n      </TrackingWrapper>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}